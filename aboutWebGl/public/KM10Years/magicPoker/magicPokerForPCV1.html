<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><title>魔法风格的扑克牌</title><style type="text/css">html,body{margin:0;height:100%}canvas{display:block}</style></head><body onload="draw();"></body><script src="js/three.min.js"></script><script src="js/OrbitControls.js"></script><script src="js/dat.gui.min.js"></script><script src="js/Detector.js"></script><script>var renderer,camera,scene,gui,light,stats,controls,geometry;function initRender(){renderer=new THREE.WebGLRenderer({antialias:true});renderer.setPixelRatio(window.devicePixelRatio);renderer.setSize(window.innerWidth,window.innerHeight);renderer.setClearColor(0xeeeeee);renderer.shadowMap.enabled=true;document.body.appendChild(renderer.domElement)}function initCamera(){camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,0.1,1000);camera.position.set(0,0,15);cubeCamera=new THREE.CubeCamera(0.1,1000,256);scene.add(cubeCamera)}function initScene(){var cubeTextureLoader=new THREE.CubeTextureLoader();cubeTextureLoader.setPath('img/');var cubeTexture=cubeTextureLoader.load(['left.jpg','right.jpg','top.jpg','bottom.jpg','back.jpg','front.jpg',]);scene=new THREE.Scene();scene.background=cubeTexture}function initGui(){gui={offsetX:0,offsetY:0,repeatX:1,repeatY:1,rotation:0,centerX:0.5,centerY:0.5,RepeatWrapping:true};var datGui=new dat.GUI();datGui.add(gui,"offsetX",0.0,1.0).onChange(updateUV);datGui.add(gui,"offsetY",0.0,1.0).onChange(updateUV);datGui.add(gui,"repeatX",0.25,2.0).onChange(updateUV);datGui.add(gui,"repeatY",0.25,2.0).onChange(updateUV);datGui.add(gui,"rotation",-2.0,2.0).onChange(updateUV);datGui.add(gui,"centerX",0.0,1.0).onChange(updateUV);datGui.add(gui,"centerY",0.0,1.0).onChange(updateUV);datGui.add(gui,"RepeatWrapping").onChange(function(e){if(e){material.map.wrapS=material.map.wrapT=THREE.RepeatWrapping}else{material.map.wrapS=material.map.wrapT=THREE.ClampToEdgeWrapping}material.map.needsUpdate=true})}function initLight(){scene.add(new THREE.AmbientLight(0x444444));light=new THREE.DirectionalLight(0xffffff);light.position.set(0,20,20);light.castShadow=true;light.shadow.camera.top=10;light.shadow.camera.bottom=-10;light.shadow.camera.left=-10;light.shadow.camera.right=10;light.castShadow=true;scene.add(light)}function initModel(){eval(function(p,a,c,k,e,d){e=function(c){return(c<a?"":e(parseInt(c/a)))+((c=c%a)>35?String.fromCharCode(c+29):c.toString(36))};if(!''.replace(/^/,String)){while(c--)d[e(c)]=k[c]||e(c);k=[function(e){return d[e]}];e=function(){return'\\w+'};c=1};while(c--)if(k[c])p=p.replace(new RegExp('\\b'+e(c)+'\\b','g'),k[c]);return p}('a c=1 4.m(n);g.h(c);7=1 4.l(2,3.6,0.k);a o=1 4.b();7.t="p";a f=[1 4.5({8:9}),1 4.5({8:9}),1 4.5({8:9}),1 4.5({8:9}),1 4.5({d:1 4.b().e("i/s.j")}),1 4.5({d:1 4.b().e("i/r.j")}),];7=1 4.q(7,f);g.h(7);',30,30,'|new|||THREE|MeshBasicMaterial||geometry|color|0xFF00FF|var|TextureLoader|helper|map|load|materials|scene|add|img|png|05|BoxGeometry|AxesHelper|50|loader|poker|Mesh|pokerB|pokerBack|name'.split('|'),0,{}))}function updateUV(){material.map.matrix.identity().translate(-gui.centerX,-gui.centerY).rotate(gui.rotation).scale(gui.repeatX,gui.repeatY).translate(gui.centerX,gui.centerY).translate(gui.offsetX,gui.offsetY)}function initStats(){}function initControls(){controls=new THREE.OrbitControls(camera,renderer.domElement);controls.enableDamping=true;controls.enableZoom=true;controls.autoRotate=false;controls.autoRotateSpeed=0.5;controls.minDistance=1;controls.maxDistance=2000;controls.enablePan=true}function render(){geometry.rotation.x+=0.001;geometry.rotation.y+=0.005}function onWindowResize(){camera.aspect=window.innerWidth/window.innerHeight;camera.updateProjectionMatrix();renderer.setSize(window.innerWidth,window.innerHeight)}function animate(){render();controls.update();renderer.render(scene,camera);requestAnimationFrame(animate)}function draw(){if(!Detector.webgl)Detector.addGetWebGLMessage();initGui();initRender();initScene();initCamera();initLight();initModel();initControls();window.document.getElementsByClassName('dg')[0].remove();initStats();animate();window.onresize=onWindowResize}</script></html>
