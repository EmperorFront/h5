<!doctype html>
<html>
	<head>
		<link rel="dns-prefetch" href="//staticcdn.igetget.com">
		<link rel="dns-prefetch" href="//staticcdn.luojilab.com">
		<link rel="dns-prefetch" href="//passport.luojilab.com">
		<link rel="dns-prefetch" href="//piccdn.luojilab.com">
		<meta name="MobileOptimized" content="320">
		<meta http-equiv="cleartype" content="on">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
	
		<meta name="format-detection" content="telephone=no, email=no">
		<meta name="msapplication-tap-highlight" content="no">
		<title>滚动模块</title>
		<style type="text/css">
		.scroll-block {
			/* back ground-color: aqua; */
			width: 100%;
			height: 500px;
			font-size: 18px;
		}
		.list{
			width: 100%;
			height: 166px;
			border: 1px solid #999;
			position: relative;
			overflow: hidden;
		}
		/* .list .rowupleft{
			-webkit-animation: 6s rowupleft linear 1 normal;
			animation: 6s rowupleft linear 1 normal;
			position: relative;
			float: left;
			width: 49%;
		} */
		.list .rowupright{
			-webkit-animation: 4s rowupright linear infinite normal;
			animation: 4s rowupright linear infinite normal;
			position: relative;
			float: right;
			width: 49%;
		}
		.name {
			font-size: 15px;
		}
		.position {
			font-size: 12px;
			color: #666666;
			margin-top: 2px;
		}
		.item {
			padding: 15px;
		}
		/* 左右定制化 */
		.ssleft {
			padding-left: 10px;
			padding-right: 5px;
		}
		</style>
		<script type="text/javascript" src="js/libs/zepto-1.2.0.min.js"></script>

	</head>
	<body>
		<!-- 这一层是外框，指定宽度 -->
		<div class="scroll-block" id="scroll-block">
			<div class="scroll-block" id="scroll-block">
		</div>
	</body>
	<script>
	
	let list = [
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊',position:'啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊upidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'十六',position:'得到设计师'},
		{name:'施展',position:'《中国史50讲》主理人，《枢纽作者》'},
		{name:'Yuyang',position:'特许金融分析师（cfa）@UK'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'},
		{name:'Mr stupidstupidstupidstupidstupidstupidstupid',position:'Mr stupidMr stupidMr stupidMr stupidMr stupidMr stupid'}
	];


	document.querySelector('#scroll-block').innerHTML = `
	<!-- 这一层是我的代码，指定高度即视区，宽度100% -->
	<div class="list">
		<!-- 这一层是移动层，有滚动效果，该层不断加载销毁新数据，上移 -->
		<div class="ccleft rowupleft" id="left-block">
			<!-- 这里边添加item一项项，一行行 -->
			<!-- 注意：每次添加数据要大一些，设计稿中没有行的概念，不对齐，原因是ss必须为一屏，重新开始对齐防止误差叠加 -->
		</div>
		<div class="ccright rowupright">
			<!-- 这里边添加item一项项，一行行 -->
			<!-- 注意：每次添加数据要大一些，设计稿中没有行的概念，不对齐，原因是ss必须为一屏，重新开始对齐防止误差叠加 -->
		</div>
	</div>
	`; // 初始化

	let option = {
	current_scroll_page: 0,
	onetime_count:11,
	left_height: 100,
	};

	// 动态编辑css 覆盖 transform
	function addKeyFramesright(height){
	style = document.createElement('style');
	style.type = 'text/css';
	//关键帧，A_DYNAMIC_VALUE为每次加载的元素高度 单位px
	let keyFrames = '\
	@-webkit-keyframes rowupleft {\
		0% {\
			-webkit-transform: translate3d(0, 0, 0);\
			transform: translate3d(0, 0, 0);\
		}\
		100% {\
			-webkit-transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
			transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
		}\
	}\
	@keyframes rowupleft {\
		0% {\
			-webkit-transform: translate3d(0, 0, 0);\
			transform: translate3d(0, 0, 0);\
		}\
		100% {\
			-webkit-transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
			transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
		}\
	}\
	';
	style.innerHTML = keyFrames.replace(/A_DYNAMIC_VALUE/g, height);
	document.getElementsByTagName('head')[0].appendChild(style);
	}
	function addKeyFramesleft(height){
	let style = document.createElement('style');
	style.type = 'text/css';
	//关键帧，A_DYNAMIC_VALUE为每次加载的元素高度 单位px
	let keyFrames = '\
	@-webkit-keyframes rowupright {\
		0% {\
			-webkit-transform: translate3d(0, 0, 0);\
			transform: translate3d(0, 0, 0);\
		}\
		100% {\
			-webkit-transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
			transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
		}\
	}\
	@keyframes rowupright {\
		0% {\
			-webkit-transform: translate3d(0, 0, 0);\
			transform: translate3d(0, 0, 0);\
		}\
		100% {\
			-webkit-transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
			transform: translate3d(0, A_DYNAMIC_VALUE, 0);\
		}\
	}\
	';
	style.innerHTML = keyFrames.replace(/A_DYNAMIC_VALUE/g, height);
	document.getElementsByTagName('head')[0].appendChild(style);
	}
	function init(){

	console.log(list);
	let leftBlock = $('#left-block');
	let name = list[option.current_scroll_page].name;
		let newElement = `<div class="item">
			<div class="name">${name}</div>
			</div>`;
		leftBlock.append(newElement);
	function initleft(){
		//左边的数据
		let count = 1; // 数据的长度

		let name = list[option.current_scroll_page].name;
		let newElement = `<div class="item">
			<div class="name">${name}</div>
			</div>`;
		leftBlock.append(newElement);
		//更新dom的方法
		function editDom () {
			//padding置空
			leftBlock.css('padding-top','0px');
			//删除老的dom
			$(leftBlock.children('.item')[0]).remove();
			//追加新的dom
			let name = list[option.current_scroll_page +1].name;
			let newElement = `<div class="item">
				<div class="name">${name}</div>
				</div>`;
			leftBlock.append(newElement);
			option.current_scroll_page += 1;
			option.current_left_children = $(leftBlock.children('.item')[0]);
			option.left_height = option.current_left_children.height();
			option.left_mgtop = 0;
		}
		editDom();
		
		function moveAnimate () {

			if (option.left_height >= option.left_mgtop) {
				option.left_mgtop += 1;
				option.current_left_children.css("margin-top","-"+option.left_mgtop+"px");
			} else {
				editDom();
			}

			window.requestAnimationFrame(function(){
				moveAnimate();
			});
		} 

		window.requestAnimationFrame(function(){
			moveAnimate();
		});
		// //拼装 正在消失模块的 数据
		// let html = '<div class="ssleft">';
		// for(let i=0; i<count; i++){
		// 	let position = list[option.current_scroll_page +i].position;
		// 	html += `<div class="item">
		// 		<div class="name">${name}</div>
		// 		<div class="position">${position}</div>
		// 		</div>`;
		// }
		// html += '</div>';
		// //拼装 第二展示模块的 数据
		// html += '<div class="ssleft">';
		// for(let i=0; i<count; i++){
		// 	let name = list[option.current_scroll_page +i].name;
		// 	let position = list[option.current_scroll_page +i].position;
		// 	html += `<div class="item">
		// 		<div class="name">${name}</div>
		// 		</div>`;
		// }
		// html += '</div>';
		// //
		// let contentDom = document.querySelector('.list .ccleft');
		// contentDom.innerHTML = html;
		// let height = document.querySelector('.list .ssleft').offsetHeight; // 一份数据的高度
		// addKeyFramesright( '-'+height+'px' ); // 设置keyframes
		// document.querySelector('.list .ccleft').className += ' rowupleft'; // 添加 rowup
		
		// //新增条数。
		// option.current_scroll_page += count;
	}					
	initleft();
	function initright(){
		//左边的数据
		let count = option.onetime_count; // 数据的长度
		//拼装第一屏数据
		let html = '<div class="ssright">';
		for(let i=0; i<count; i++){
			let name = list[option.current_scroll_page +i].name;
			let position = list[option.current_scroll_page +i].position;
			html += `<div class="item">
				<div class="name">${name}</div>
				<div class="position">${position}</div>
				</div>`;
		}
		html += '</div>';
		//拼装接续数据
		document.querySelector('.list .ccright').innerHTML = html+html; // 复制一份数据
		let height = document.querySelector('.list .ssright').offsetHeight; // 一份数据的高度
		addKeyFramesleft( '-'+height+'px' ); // 设置keyframes
		document.querySelector('.list .ccright').className += ' rowupright'; // 添加 rowup
	}
	//initright();
	}
init(); 
</script>

</html>
